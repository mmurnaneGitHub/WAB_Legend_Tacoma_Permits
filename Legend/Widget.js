define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./Utils ./d3.min ./d3-dsv.v1.min esri/layers/FeatureLayer esri/Color esri/symbols/SimpleLineSymbol esri/symbols/SimpleMarkerSymbol esri/renderers/SimpleRenderer esri/graphic esri/layers/GraphicsLayer dojo/_base/array esri/InfoTemplate esri/geometry/Point dijit/form/DateTextBox dijit/form/ComboBox dojo/store/Memory dijit/form/FilteringSelect dijit/form/Button dojox/form/CheckedMultiSelect dojo/data/ObjectStore esri/toolbars/draw esri/geometry/webMercatorUtils esri/symbols/SimpleFillSymbol dijit/form/CheckBox dijit/form/TextBox dijit/_WidgetsInTemplateMixin jimu/BaseWidget jimu/LayerInfos/LayerInfos esri/dijit/Legend".split(" "),
function(B,g,C,n,u,p,P,D,v,w,E,F,x,G,h,H,q,y,Q,k,z,r,l,m,A,t,I,J,K,L,M,N,O){return B([M,L],{name:"Legend",baseClass:"jimu-widget-legend",legend:null,_jimuLayerInfos:null,_inDrawMode:!1,startup:function(){this.inherited(arguments);permitNumberSearch=!1;var a=document.createElement("div");a.innerHTML='<div id="queryResults"></div>';this.domNode.parentNode.insertBefore(a,this.domNode.nextSibling);drawnGraphicsLayer=new G;this.map.addLayer(drawnGraphicsLayer);a=new v([0,255,0,.5]);a=new E("solid",25,
new w(w.STYLE_SOLID,new v([89,95,35]),1),a);a=new F(a);var c=new H("Permit ${Permit_Number}","<b>Address:</b> ${Address_Line_1}<br> <b>Permit Type: </b> ${Permit_Type_Description}<br> <b>Current Status: </b> ${Current_Status}<br> <b>Issued Date: </b> ${Issued_Date}<br> <b>Fee: </b> ${Fees_Paid}<br> <b>Estimated Value: </b> ${Valuation}<br> <b>Description:</b> ${Description}<br> <a target='_blank' href='${Link}' >More information</a><br> <a target='_blank' href='https://wspdsmap.cityoftacoma.org/website/Google/StreetView/?lat=${Latitude}&lon=${Longitude}' >Street View</a>");
featureLayer=new D({layerDefinition:{geometryType:"esriGeometryPoint",objectIdField:"ObjectID",fields:[]},featureSet:{features:[],geometryType:"esriGeometryPoint"}},{infoTemplate:c});featureLayer.title="Permits";featureLayer.setRenderer(a);this.map.addLayers([featureLayer]);dateToday=new Date;a=dateToday.getDate();c=dateToday.getMonth()+1;var d=dateToday.getFullYear();10>a&&(a="0"+a);10>c&&(c="0"+c);dateTodayCalendar=d+"-"+c+"-"+a;dateToday30=new Date;dateToday30.setDate(dateToday30.getDate()-30);
a=dateToday30.getDate();c=dateToday30.getMonth()+1;d=dateToday30.getFullYear();10>a&&(a="0"+a);10>c&&(c="0"+c);dateToday30Calendar=d+"-"+c+"-"+a;a=new k({data:[{name:"All Categories",id:"All"},{name:"Building",id:"Building"},{name:"Demolition",id:"Demolition"},{name:"Fire",id:"Fire"},{name:"Historic",id:"Historic"},{name:"Land Use",id:"LandUse"},{name:"Mechanical",id:"Mechanical"},{name:"Plumbing",id:"Plumbing"},{name:"Pre-Application",id:"Pre-Application"},{name:"Right-of-Way",id:"ROW"},{name:"Sign",
id:"Sign"},{name:"Site Development",id:"SiteDevelopment"},{name:"Special Event",id:"SpecialEvent"},{name:"Tree",id:"Tree"},{name:"Utility",id:"Utility"}]});c=new k({data:[{name:"All Status",id:"All"},{name:"Application",id:"Application"},{name:"Review",id:"Review"},{name:"Inspections",id:"Inspections"},{name:"Finalized",id:"Finalized"}]});(new z({value:"All",store:a,style:"width: 160px;",onChange:g.hitch(this,this._searchFilter)},"categorySelect")).startup();(new z({value:"All",store:c,style:"width: 160px;",
onChange:g.hitch(this,this._searchFilter)},"statusSelect")).startup();a=new k({idProperty:"value",data:[{value:"Commercial Alteration",label:"Commercial Alteration"},{value:"Commercial New Building",label:"Commercial New Building"},{value:"Residential Alteration",label:"Residential Alteration"},{value:"Residential New Building",label:"Residential New Building"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"BuildingMenu")).startup();
a=new k({idProperty:"value",data:[{value:"Commercial",label:"Commercial"},{value:"Residential",label:"Residential"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"DemolitionMenu")).startup();a=new k({idProperty:"value",data:[{value:"Commercial",label:"Commercial"},{value:"Residential",label:"Residential"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,
this._searchFilter)},"FireMenu")).startup();a=new k({idProperty:"value",data:[{value:"Application",label:"Application"},{value:"CAPOMM",label:"CAPOMM"},{value:"Reconsideration or Appeal",label:"Reconsideration or Appeal"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"LandUseMenu")).startup();a=new k({idProperty:"value",data:[{value:"Commercial",label:"Commercial"},{value:"Residential",label:"Residential"}]});a=
new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"MechanicalMenu")).startup();a=new k({idProperty:"value",data:[{value:"Commercial",label:"Commercial"},{value:"Residential",label:"Residential"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"PlumbingMenu")).startup();a=new k({idProperty:"value",data:[{value:"Construction",label:"Construction"},
{value:"Occupancy",label:"Occupancy"},{value:"Tree",label:"Tree"},{value:"Use",label:"Use"},{value:"Utility",label:"Utility"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"ROWMenu")).startup();a=new k({idProperty:"value",data:[{value:"Deviation Request",label:"Deviation Request"},{value:"Development",label:"Development"},{value:"Noise Variance",label:"Noise Variance"},{value:"Utility",label:"Utility"},{value:"Work Order",
label:"Work Order"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"SiteDevelopmentMenu")).startup();a=new k({idProperty:"value",data:[{value:"Surfacewater",label:"Surfacewater"},{value:"Wastewater",label:"Wastewater"},{value:"Water",label:"Water"}]});a=new m({objectStore:a,labelProperty:"label"});(new l({dropDown:!0,multiple:!0,store:a,onChange:g.hitch(this,this._searchFilter)},"UtilityMenu")).startup();(new y({value:dateToday30Calendar,
style:"width: 130px;",onChange:g.hitch(this,this._searchFilter)},"date1")).startup();(new y({value:dateTodayCalendar,style:"width: 130px;",onChange:g.hitch(this,this._searchFilter)},"date2")).startup();(new J({onChange:g.hitch(this,this._drawLimitArea)},"checkBoxDraw")).startup();(new r({label:"Start Over",iconClass:"dijitIconDelete",disabled:!0,onClick:g.hitch(this,this._drawLimitArea)},"buttonDraw")).startup();this.map.on("load",this._drawCreateToolbar());(new r({label:"Download Current Selection (CSV)",
iconClass:"dijitEditorIcon dijitEditorIconInsertTable",onClick:g.hitch(this,this._exportToCSV)},"exportButton")).startup();document.getElementById("ProgressBar").innerHTML="<div class='dijitProgressBar dijitProgressBarEmpty dijitProgressBarIndeterminate' role='progressbar' aria-labelledby='dijit_ProgressBar_0_label' aria-valuemin='0' aria-valuemax='100' id='dijit_ProgressBar_0' widgetid='dijit_ProgressBar_0' style='display: block;'><div data-dojo-attach-point='internalProgress' class='dijitProgressBarFull' style='width: 100%;'><div class='dijitProgressBarTile' role='presentation'></div><span style='visibility:hidden'>&nbsp;</span></div><div data-dojo-attach-point='labelNode' class='dijitProgressBarLabel' id='dijit_ProgressBar_0_label'>&nbsp;</div><span data-dojo-attach-point='indeterminateHighContrastImage' class='dijitInline dijitProgressBarIndeterminateHighContrastImage' src='//js.arcgis.com/3.15/dijit/themes/a11y/indeterminate_progress.gif'></span></div>";
this._toggleLoader(!0);(new K({placeHolder:"BLDCA19-0090 etc.",style:"width: 160px;",onKeyDown:g.hitch(this,this._searchPermit)},"PermitNum")).startup();(new r({showLabel:!1,label:"Find Permit Number",iconClass:"dijitEditorIconSpace",onClick:g.hitch(this,this._searchPermit)},"buttonPermitNum")).startup();dojo.style("buttonPermitNum","height","20px");dojo.style("buttonPermitNum","width","18px");dojo.style("buttonPermitNum","background-image","url(images/dataSearchIcon.png)");json1=json1_ALL=null;a=
9>(new Date).getHours()?"before9":"after9";this._download_D3("data/Permits.json?v="+a);var e=setInterval(g.hitch(this,function(){null!=json1&&null!=json1_ALL&&(clearInterval(e),this._paddingSubMenus(),this._extentWatch(),g.hitch(this,this.map.setLevel(this.map.getLevel())))},100))},onOpen:function(){this._jimuLayerInfos=N.getInstanceSync();var a={arrangement:this.config.legend.arrangement,autoUpdate:this.config.legend.autoUpdate,respectCurrentMapScale:this.config.legend.respectCurrentMapScale,map:this.map,
layerInfos:this._getLayerInfosParam()};this.legend=new O(a,C.create("div",{},this.domNode));this.legend.startup();this._bindEvent()},onClose:function(){this.legend.destroy()},_toggleLoader:function(a){a?(document.getElementById("ProgressBar").style.display="block",document.getElementById("exportButtonDIV").style.display="none",document.getElementById("queryResults").innerHTML="Please wait, loading permits ..."):(document.getElementById("ProgressBar").style.display="none",document.getElementById("exportButtonDIV").style.display=
"block",document.getElementById("loader-wrapper").style.display="none")},_paddingSubMenus:function(){for(var a=document.getElementsByClassName("dijitButtonText"),c=0;c<a.length;c++)a[c].style.padding="8px"},_toggleSubMenus:function(){for(var a=document.getElementsByClassName("subMenu"),c=0;c<a.length;c++)a[c].style.display="none";if("Building"==dijit.byId("categorySelect").value||"Demolition"==dijit.byId("categorySelect").value||"Fire"==dijit.byId("categorySelect").value||"LandUse"==dijit.byId("categorySelect").value||
"Mechanical"==dijit.byId("categorySelect").value||"Plumbing"==dijit.byId("categorySelect").value||"ROW"==dijit.byId("categorySelect").value||"SiteDevelopment"==dijit.byId("categorySelect").value||"Utility"==dijit.byId("categorySelect").value)document.getElementById(dijit.byId("categorySelect").value).style.display="block"},_download_D3:function(a){p.json(a,this._filter_D3)},_filter_D3:function(a){this.json1_ALL=this.json1=a.result.records},_requestLayerQuery:function(a,c){var d=0,e=JSON.parse('{"items":'+
JSON.stringify(c)+"}"),f=[],b="<b>"+e.items.length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"</b> selected permits in map extent.";1==e.items.length&&(b=1==permitNumberSearch?"Selected by permit number = "+e.items[0].Permit_Number:"One selected permit in map extent.");1<e.items.length&&(b+="<br>&nbsp;<br><i><b>NOTE:</b> Multiple permits may occur at one location.  Click marker for permit number and 'Browse Features' for individual permit details. <a href='Help.html#Identify' target='_blank'>HELP</a></i>");
h.forEach(e.items,function(a){if(3E4>d){var c={};c.Permit_Number=a.Permit_Number;c.Address_Line_1=a.Address_Line_1;c.Permit_Type_Description=a.Permit_Type_Description;c.Current_Status=a.Current_Status;c.Issued_Date=a.Issued_Date;c.Fees_Paid=a.Fees_Paid;c.Valuation=a.Valuation;c.Description=a.Description;c.Link=a.Link;c.Longitude=a.Longitude;c.Latitude=a.Latitude;var g=new q({x:a.Longitude,y:a.Latitude,spatialReference:{wkid:4326}});g=new x(g);g.setAttributes(c);f.push(g);b+="<hr color='#acb1db'><br>";
b+="<b>Permit: </b>"+a.Permit_Number+"<br>";b+="<b>Address: </b>"+a.Address_Line_1+"<br>";b+="<b>Permit Type: </b>"+a.Permit_Type_Description+"<br>";b+="<b>Current Status: </b>"+a.Current_Status+"<br>";b+="<b>Issued Date: </b>"+a.Issued_Date+"<br>";b+="<b>Fee: </b>"+a.Fees_Paid+"<br>";b+="<b>Estimated Value: </b>"+a.Valuation+"<br>";b+="<b>Description: </b>"+a.Description+"<br>";b+="<b><a target='_blank' href='"+a.Link+"' >More information</a></b><br>";3E4>e.items.length&&0>a.Longitude&&0<a.Latitude&&
(b+="<b><a href='https://wspdsmap.cityoftacoma.org/website/Google/StreetView/?lat="+a.Latitude+"&lon="+a.Longitude+"' target='_blank'>Street View</a></b><br>",b+="<b><a href='javascript:void(0);'  id='"+a.Permit_Number+"' >Zoom to</a></b><br>&nbsp;<br>");d++}});featureLayer.clear();featureLayer.applyEdits(f,null,null);1==f.length&&featureLayer.disableFeatureReduction();600<screen.width&&1<f.length&&(featureLayer.enableFeatureReduction(),featureLayer.setFeatureReduction({type:"cluster"}));featureLayer.refresh();
document.getElementById("queryResults").innerHTML=b;3E4>e.items.length&&h.forEach(e.items,function(c){var b=new q({x:c.Longitude,y:c.Latitude,spatialReference:{wkid:4326}});n(document.getElementById(""+c.Permit_Number),"click",function(){a.centerAndZoom(esri.geometry.geographicToWebMercator(new esri.geometry.Point(b)),19)});d++})},_drawLimitArea:function(){1==permitNumberSearch&&(permitNumberSearch=!1);drawnGraphicsLayer.clear();document.getElementById("checkBoxDraw").checked?(this.toolbar.activate(A.POLYGON),
dijit.byId("buttonDraw").setDisabled(!1),this._inDrawMode=!0):(this.toolbar.deactivate(),dijit.byId("buttonDraw").setDisabled(!0),this._inDrawMode=!1,this.map.setLevel(this.map.getLevel()-1))},_drawCreateToolbar:function(){this.toolbar=new A(this.map);this.own(n(this.toolbar,"draw-end",g.hitch(this,this._drawAddToMap)))},_drawAddToMap:function(a){this.toolbar.deactivate();this._inDrawMode=!1;a=new x(a.geometry,new I);drawnGraphicsLayer.add(a);this.map.setExtent(a.geometry.getExtent(),!0)},_extentWatch:function(){this.own(n(this.map,
"extent-change",g.hitch(this,this._extentWait)))},_extentWait:function(){this.sumTimer&&(clearTimeout(this.sumTimer),this.sumTimer=null);this.sumTimer=setTimeout(g.hitch(this,this._extentQuery),900)},_extentQuery:function(){if(!permitNumberSearch){this._toggleSubMenus();var a=dojo.date.locale.format(dijit.byId("date1").value,{datePattern:"yyyy-MM-dd",selector:"date"}),c=dojo.date.locale.format(dijit.byId("date2").value,{datePattern:"yyyy-MM-dd",selector:"date"});if(!this._inDrawMode){if(0==drawnGraphicsLayer.graphics.length){var d=
this.map.extent,e=t.xyToLngLat(d.xmin,d.ymin);d=t.xyToLngLat(d.xmax,d.ymax);this.json1=null;this._toggleLoader(!0);g.hitch(this,this._queryPermits(e,d,a,c))}else{var f=[];e=drawnGraphicsLayer.graphics[0].geometry.rings[0];for(i=0;i<e.length;i++)f.push(t.xyToLngLat(e[i][0],e[i][1]));e=json1_ALL.filter(function(a){return p.polygonContains(f,[a.Longitude,a.Latitude])});this.json1=null;this._toggleLoader(!0);g.hitch(this,this._queryPermitsPolygon(e,a,c))}var b=setInterval(g.hitch(this,function(){if(null!=
this.json1){clearInterval(b);this._toggleLoader(!1);if(3E4<this.json1.length){var a="NOTE: Current selection equals "+this.json1.length.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+" records, but only the first 30,0000 will be displayed on map.";alert(a)}g.hitch(this,this._requestLayerQuery(this.map,this.json1))}},100))}}},_exportToCSV:function(){var a=p.csvFormat(this.json1,"Permit_Number Applied_Date Latitude Longitude Address_Line_1 Permit_Type_Description Current_Status Issued_Date Fees_Paid Valuation Description Link".split(" ")),
c=new Blob([a],{type:"text/csv;charset=utf-8;"});navigator.msSaveBlob?navigator.msSaveBlob(c,"Selected_Permits.csv"):(a=document.createElement("a"),void 0!==a.download&&(c=URL.createObjectURL(c),a.setAttribute("href",c),a.setAttribute("download","Selected_Permits.csv"),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)))},_queryBuilding:function(a){var c=theBuildingList2=theBuildingList3=theBuildingList4=[];h.forEach(dijit.byId("BuildingMenu").value,function(d){"Commercial Alteration"==
d&&(c=a.filter(function(a){return"Building Commercial Alteration "==a.Permit_Type_Description||"ePermit Commercial Overlay "==a.Permit_Type_Description||"ePermit Commercial Strip "==a.Permit_Type_Description}));"Commercial New Building"==d&&(theBuildingList2=a.filter(function(a){return"Building Commercial New Building "==a.Permit_Type_Description}));"Residential Alteration"==d&&(theBuildingList3=a.filter(function(a){return"Building Residential Alteration "==a.Permit_Type_Description||"ePermit Roof Overlay "==
a.Permit_Type_Description||"ePermit Siding Replacement "==a.Permit_Type_Description||"ePermit Window Replacement "==a.Permit_Type_Description}));"Residential New Building"==d&&(theBuildingList4=a.filter(function(a){return"Building Residential New Building "==a.Permit_Type_Description}))});return c.concat(theBuildingList2,theBuildingList3,theBuildingList4)},_queryDemolition:function(a){var c=theDemolitionList2=[];h.forEach(dijit.byId("DemolitionMenu").value,function(d){"Commercial"==d&&(c=a.filter(function(a){return"Building Commercial Demolition "==
a.Permit_Type_Description}));"Residential"==d&&(theDemolitionList2=a.filter(function(a){return"Building Residential Demolition "==a.Permit_Type_Description||"ePermit Residential Accessory Demolition "==a.Permit_Type_Description||"ePermit Residential Accessory Demolition No Fee "==a.Permit_Type_Description||"ePermit Residential Demo "==a.Permit_Type_Description||"ePermit Residential Demolition "==a.Permit_Type_Description}))});return c.concat(theDemolitionList2)},_queryFire:function(a){var c=theFireList2=
[];h.forEach(dijit.byId("FireMenu").value,function(d){"Commercial"==d&&(c=a.filter(function(a){return"Building Commercial Fire Protection "==a.Permit_Type_Description}));"Residential"==d&&(theFireList2=a.filter(function(a){return"Building Residential Fire Protection "==a.Permit_Type_Description||"ePermit Fire Alarm "==a.Permit_Type_Description||"ePermit Fire Sprinkler "==a.Permit_Type_Description||"ePermit Fire Transmitter "==a.Permit_Type_Description}))});return c.concat(theFireList2)},_queryLandUse:function(a){var c=
theLandUseList2=theLandUseList3=[];h.forEach(dijit.byId("LandUseMenu").value,function(d){"Application"==d&&(c=a.filter(function(a){return"Land Use Application "==a.Permit_Type_Description}));"CAPOMM"==d&&(theLandUseList2=a.filter(function(a){return"Land Use CAPOMM "==a.Permit_Type_Description}));"Reconsideration or Appeal"==d&&(theLandUseList3=a.filter(function(a){return"Land Use Reconsideration or Appeal "==a.Permit_Type_Description}))});return c.concat(theLandUseList2,theLandUseList3)},_queryMechanical:function(a){var c=
theMechanicalList2=[];h.forEach(dijit.byId("MechanicalMenu").value,function(d){"Commercial"==d&&(c=a.filter(function(a){return"Building Commercial Mechanical "==a.Permit_Type_Description}));"Residential"==d&&(theMechanicalList2=a.filter(function(a){return"Building Residential Mechanical "==a.Permit_Type_Description||"ePermit Residential Ductless "==a.Permit_Type_Description||"ePermit Residential Mechanical "==a.Permit_Type_Description}))});return c.concat(theMechanicalList2)},_queryPlumbing:function(a){var c=
thePlumbingList2=[];h.forEach(dijit.byId("PlumbingMenu").value,function(d){"Commercial"==d&&(c=a.filter(function(a){return"Building Commercial Plumbing "==a.Permit_Type_Description||"ePermit Irrigation BackflowPreventer "==a.Permit_Type_Description}));"Residential"==d&&(thePlumbingList2=a.filter(function(a){return"Building Residential Plumbing "==a.Permit_Type_Description||"ePermit Furnace Replacement "==a.Permit_Type_Description||"ePermit HeatPump Replacement "==a.Permit_Type_Description||"ePermit Residential Plumbing "==
a.Permit_Type_Description||"ePermit Water Repair "==a.Permit_Type_Description||"ePermit WaterHeater Replacement "==a.Permit_Type_Description}))});return c.concat(thePlumbingList2)},_queryROW:function(a){var c=theROWList2=theROWList3=theROWList4=theROWList5=[];h.forEach(dijit.byId("ROWMenu").value,function(d){"Construction"==d&&(c=a.filter(function(a){return"Right-of-Way Construction "==a.Permit_Type_Description}));"Occupancy"==d&&(theROWList2=a.filter(function(a){return"Right-of-Way Occupancy "==
a.Permit_Type_Description}));"Tree"==d&&(theROWList3=a.filter(function(a){return"Right-of-Way Tree "==a.Permit_Type_Description}));"Use"==d&&(theROWList4=a.filter(function(a){return"Right-of-Way Use "==a.Permit_Type_Description}));"Utility"==d&&(theROWList5=a.filter(function(a){return"Right-of-Way Utility "==a.Permit_Type_Description}))});return c.concat(theROWList2,theROWList3,theROWList4,theROWList5)},_querySiteDevelopment:function(a){var c=theSiteDevelopmentList2=theSiteDevelopmentList3=theSiteDevelopmentList4=
theSiteDevelopmentList5=[];h.forEach(dijit.byId("SiteDevelopmentMenu").value,function(d){"Development"==d&&(theSiteDevelopmentList2=a.filter(function(a){return"Site Development "==a.Permit_Type_Description}));"Deviation Request"==d&&(c=a.filter(function(a){return"Site Deviation Request "==a.Permit_Type_Description}));"Noise Variance"==d&&(theSiteDevelopmentList3=a.filter(function(a){return"Site Noise Variance "==a.Permit_Type_Description}));"Utility"==d&&(theSiteDevelopmentList4=a.filter(function(a){return"Site Utility "==
a.Permit_Type_Description}));"Work Order"==d&&(theSiteDevelopmentList5=a.filter(function(a){return"Site Work Order "==a.Permit_Type_Description}))});return c.concat(theSiteDevelopmentList2,theSiteDevelopmentList3,theSiteDevelopmentList4,theSiteDevelopmentList5)},_queryUtility:function(a){var c=theUtilityList2=theUtilityList3=[];h.forEach(dijit.byId("UtilityMenu").value,function(d){"Surfacewater"==d&&(c=a.filter(function(a){return"Utility Connection Surfacewater "==a.Permit_Type_Description}));"Wastewater"==
d&&(theUtilityList2=a.filter(function(a){return"Utility Connection Wastewater "==a.Permit_Type_Description}));"Water"==d&&(theUtilityList3=a.filter(function(a){return"Utility Connection Water "==a.Permit_Type_Description}))});return c.concat(theUtilityList2,theUtilityList3)},_queryPermits:function(a,c,d,e){var f=null;"All"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=
Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&"Code Compliance Minimum Code Inspection "!=b.Permit_Type_Description&&"Code Compliance Violation Notice "!=b.Permit_Type_Description}):"Building"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Building Commercial Alteration "==b.Permit_Type_Description||
"Building Commercial New Building "==b.Permit_Type_Description||"Building Residential Alteration "==b.Permit_Type_Description||"Building Residential New Building "==b.Permit_Type_Description||"ePermit Commercial Overlay "==b.Permit_Type_Description||"ePermit Commercial Strip "==b.Permit_Type_Description||"ePermit Roof Overlay "==b.Permit_Type_Description||"ePermit Siding Replacement "==b.Permit_Type_Description||"ePermit Window Replacement "==b.Permit_Type_Description)}),0<dijit.byId("BuildingMenu").value.length&&
dijit.byId("BuildingMenu").value.length<dijit.byId("BuildingMenu").options.length&&(f=this._queryBuilding(f))):"Demolition"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Building Commercial Demolition "==b.Permit_Type_Description||"Building Residential Demolition "==b.Permit_Type_Description||"ePermit Residential Accessory Demolition "==
b.Permit_Type_Description||"ePermit Residential Accessory Demolition No Fee "==b.Permit_Type_Description||"ePermit Residential Demo "==b.Permit_Type_Description||"ePermit Residential Demolition "==b.Permit_Type_Description)}),0<dijit.byId("DemolitionMenu").value.length&&dijit.byId("DemolitionMenu").value.length<dijit.byId("DemolitionMenu").options.length&&(f=this._queryDemolition(f))):"Fire"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<
c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Building Commercial Fire Protection "==b.Permit_Type_Description||"Building Residential Fire Protection "==b.Permit_Type_Description||"ePermit Fire Alarm "==b.Permit_Type_Description||"ePermit Fire Sprinkler "==b.Permit_Type_Description||"ePermit Fire Transmitter "==b.Permit_Type_Description)}),0<dijit.byId("FireMenu").value.length&&dijit.byId("FireMenu").value.length<
dijit.byId("FireMenu").options.length&&(f=this._queryFire(f))):"Historic"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&"Historic Design Review "==b.Permit_Type_Description}):"LandUse"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>
a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Land Use Application "==b.Permit_Type_Description||"Land Use CAPOMM "==b.Permit_Type_Description||"Land Use Reconsideration or Appeal "==b.Permit_Type_Description)}),0<dijit.byId("LandUseMenu").value.length&&dijit.byId("LandUseMenu").value.length<dijit.byId("LandUseMenu").options.length&&(f=this._queryLandUse(f))):"Mechanical"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>
a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Building Commercial Mechanical "==b.Permit_Type_Description||"Building Residential Mechanical "==b.Permit_Type_Description||"ePermit Residential Ductless "==b.Permit_Type_Description||"ePermit Residential Mechanical "==b.Permit_Type_Description)}),0<dijit.byId("MechanicalMenu").value.length&&dijit.byId("MechanicalMenu").value.length<dijit.byId("MechanicalMenu").options.length&&
(f=this._queryMechanical(f))):"Plumbing"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Building Commercial Plumbing "==b.Permit_Type_Description||"Building Residential Plumbing "==b.Permit_Type_Description||"ePermit Furnace Replacement "==b.Permit_Type_Description||"ePermit HeatPump Replacement "==b.Permit_Type_Description||
"ePermit Irrigation BackflowPreventer "==b.Permit_Type_Description||"ePermit Residential Plumbing "==b.Permit_Type_Description||"ePermit Water Repair "==b.Permit_Type_Description||"ePermit WaterHeater Replacement "==b.Permit_Type_Description)}),0<dijit.byId("PlumbingMenu").value.length&&dijit.byId("PlumbingMenu").value.length<dijit.byId("PlumbingMenu").options.length&&(f=this._queryPlumbing(f))):"Pre-Application"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>
a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&"Pre-Application "==b.Permit_Type_Description}):"ROW"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Right-of-Way Construction "==b.Permit_Type_Description||
"Right-of-Way Occupancy "==b.Permit_Type_Description||"Right-of-Way Tree "==b.Permit_Type_Description||"Right-of-Way Use "==b.Permit_Type_Description||"Right-of-Way Utility "==b.Permit_Type_Description)}),0<dijit.byId("ROWMenu").value.length&&dijit.byId("ROWMenu").value.length<dijit.byId("ROWMenu").options.length&&(f=this._queryROW(f))):"Sign"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=
Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&"Sign "==b.Permit_Type_Description}):"SiteDevelopment"==dijit.byId("categorySelect").value?(f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Site Deviation Request "==b.Permit_Type_Description||"Site Development "==b.Permit_Type_Description||"Site Noise Variance "==b.Permit_Type_Description||
"Site Utility "==b.Permit_Type_Description||"Site Work Order "==b.Permit_Type_Description)}),0<dijit.byId("SiteDevelopmentMenu").value.length&&dijit.byId("SiteDevelopmentMenu").value.length<dijit.byId("SiteDevelopmentMenu").options.length&&(f=this._querySiteDevelopment(f))):"SpecialEvent"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=
Date.parse(d)&&"Special Event "==b.Permit_Type_Description}):"Tree"==dijit.byId("categorySelect").value?f=json1_ALL.filter(function(b){return b.Longitude>a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("ePermit Commercial Tree "==b.Permit_Type_Description||"ePermit Tree "==b.Permit_Type_Description)}):"Utility"==dijit.byId("categorySelect").value&&(f=json1_ALL.filter(function(b){return b.Longitude>
a["0"]&&b.Longitude<c["0"]&&b.Latitude>a["1"]&&b.Latitude<c["1"]&&Date.parse(b.Applied_Date)<=Date.parse(e)&&Date.parse(b.Applied_Date)>=Date.parse(d)&&("Utility Connection Surfacewater "==b.Permit_Type_Description||"Utility Connection Wastewater "==b.Permit_Type_Description||"Utility Connection Water "==b.Permit_Type_Description)}),0<dijit.byId("UtilityMenu").value.length&&dijit.byId("UtilityMenu").value.length<dijit.byId("UtilityMenu").options.length&&(f=this._queryUtility(f)));this._queryPermitStatus(f)},
_queryPermitsPolygon:function(a,c,d){var e=null;"All"==dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&"Code Compliance Minimum Code Inspection "!=a.Permit_Type_Description&&"Code Compliance Violation Notice "!=a.Permit_Type_Description&&"Documents Bond "!=a.Permit_Type_Description}):"Building"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&
Date.parse(a.Applied_Date)>=Date.parse(c)&&("Building Commercial Alteration "==a.Permit_Type_Description||"Building Commercial New Building "==a.Permit_Type_Description||"Building Residential Alteration "==a.Permit_Type_Description||"Building Residential New Building "==a.Permit_Type_Description||"ePermit Commercial Overlay "==a.Permit_Type_Description||"ePermit Commercial Strip "==a.Permit_Type_Description||"ePermit Roof Overlay "==a.Permit_Type_Description||"ePermit Siding Replacement "==a.Permit_Type_Description||
"ePermit Window Replacement "==a.Permit_Type_Description)}),0<dijit.byId("BuildingMenu").value.length&&dijit.byId("BuildingMenu").value.length<dijit.byId("BuildingMenu").options.length&&(e=this._queryBuilding(e))):"Demolition"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Building Commercial Demolition "==a.Permit_Type_Description||"Building Residential Demolition "==a.Permit_Type_Description||
"ePermit Residential Accessory Demolition "==a.Permit_Type_Description||"ePermit Residential Accessory Demolition No Fee "==a.Permit_Type_Description||"ePermit Residential Demo "==a.Permit_Type_Description||"ePermit Residential Demolition "==a.Permit_Type_Description)}),0<dijit.byId("DemolitionMenu").value.length&&dijit.byId("DemolitionMenu").value.length<dijit.byId("DemolitionMenu").options.length&&(e=this._queryDemolition(e))):"Fire"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=
Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Building Commercial Fire Protection "==a.Permit_Type_Description||"Building Residential Fire Protection "==a.Permit_Type_Description||"ePermit Fire Alarm "==a.Permit_Type_Description||"ePermit Fire Sprinkler "==a.Permit_Type_Description||"ePermit Fire Transmitter "==a.Permit_Type_Description)}),0<dijit.byId("FireMenu").value.length&&dijit.byId("FireMenu").value.length<dijit.byId("FireMenu").options.length&&(e=this._queryFire(e))):"Historic"==
dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&"Historic Design Review "==a.Permit_Type_Description}):"LandUse"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Land Use Application "==a.Permit_Type_Description||"Land Use CAPOMM "==a.Permit_Type_Description||"Land Use Reconsideration or Appeal "==
a.Permit_Type_Description)}),0<dijit.byId("LandUseMenu").value.length&&dijit.byId("LandUseMenu").value.length<dijit.byId("LandUseMenu").options.length&&(e=this._queryLandUse(e))):"Mechanical"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Building Commercial Mechanical "==a.Permit_Type_Description||"Building Residential Mechanical "==a.Permit_Type_Description||"ePermit Residential Ductless "==
a.Permit_Type_Description||"ePermit Residential Mechanical "==a.Permit_Type_Description)}),0<dijit.byId("MechanicalMenu").value.length&&dijit.byId("MechanicalMenu").value.length<dijit.byId("MechanicalMenu").options.length&&(e=this._queryMechanical(e))):"Plumbing"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Building Commercial Plumbing "==a.Permit_Type_Description||"Building Residential Plumbing "==
a.Permit_Type_Description||"ePermit Furnace Replacement "==a.Permit_Type_Description||"ePermit HeatPump Replacement "==a.Permit_Type_Description||"ePermit Irrigation BackflowPreventer "==a.Permit_Type_Description||"ePermit Residential Plumbing "==a.Permit_Type_Description||"ePermit Water Repair "==a.Permit_Type_Description||"ePermit WaterHeater Replacement "==a.Permit_Type_Description)}),0<dijit.byId("PlumbingMenu").value.length&&dijit.byId("PlumbingMenu").value.length<dijit.byId("PlumbingMenu").options.length&&
(e=this._queryPlumbing(e))):"Pre-Application"==dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&"Pre-Application "==a.Permit_Type_Description}):"ROW"==dijit.byId("categorySelect").value?(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Right-of-Way Construction "==a.Permit_Type_Description||"Right-of-Way Occupancy "==a.Permit_Type_Description||
"Right-of-Way Tree "==a.Permit_Type_Description||"Right-of-Way Use "==a.Permit_Type_Description||"Right-of-Way Utility "==a.Permit_Type_Description)}),0<dijit.byId("ROWMenu").value.length&&dijit.byId("ROWMenu").value.length<dijit.byId("ROWMenu").options.length&&(e=this._queryROW(e))):"Sign"==dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&"Sign "==a.Permit_Type_Description}):"SiteDevelopment"==dijit.byId("categorySelect").value?
(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Site Deviation Request "==a.Permit_Type_Description||"Site Development "==a.Permit_Type_Description||"Site Noise Variance "==a.Permit_Type_Description||"Site Utility "==a.Permit_Type_Description||"Site Work Order "==a.Permit_Type_Description)}),0<dijit.byId("SiteDevelopmentMenu").value.length&&dijit.byId("SiteDevelopmentMenu").value.length<dijit.byId("SiteDevelopmentMenu").options.length&&
(e=this._querySiteDevelopment(e))):"SpecialEvent"==dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&"Special Event "==a.Permit_Type_Description}):"Tree"==dijit.byId("categorySelect").value?e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("ePermit Commercial Tree "==a.Permit_Type_Description||"ePermit Tree "==a.Permit_Type_Description)}):
"Utility"==dijit.byId("categorySelect").value&&(e=a.filter(function(a){return Date.parse(a.Applied_Date)<=Date.parse(d)&&Date.parse(a.Applied_Date)>=Date.parse(c)&&("Utility Connection Surfacewater "==a.Permit_Type_Description||"Utility Connection Wastewater "==a.Permit_Type_Description||"Utility Connection Water "==a.Permit_Type_Description)}),0<dijit.byId("UtilityMenu").value.length&&dijit.byId("UtilityMenu").value.length<dijit.byId("UtilityMenu").options.length&&(e=this._queryUtility(e)));this._queryPermitStatus(e)},
_queryPermitStatus:function(a){"All"==dijit.byId("statusSelect").value?json1_ALL_tmp2=a.filter(function(a){return"Canceled"!=a.Current_Status&&"Cancelled"!=a.Current_Status&&"Code Enforcement"!=a.Current_Status&&"Complete - No Violation"!=a.Current_Status&&"Complete - Violation Corrected"!=a.Current_Status&&"Permit Canceled"!=a.Current_Status&&"Under Investigation"!=a.Current_Status}):"Application"==dijit.byId("statusSelect").value?json1_ALL_tmp2=a.filter(function(a){return"Addl Information Required"==
a.Current_Status||"Application Accepted"==a.Current_Status||"Application Submitted"==a.Current_Status||"Complete Application"==a.Current_Status||"Incomplete Application"==a.Current_Status||"Intake"==a.Current_Status||"Missing or Incorrect Info"==a.Current_Status||"Missing Required Documents"==a.Current_Status||"Pending Intake Screening"==a.Current_Status||"Permit Fees Due"==a.Current_Status||"Waiting for Information"==a.Current_Status||"Incomplete/Requires Pre-App"==a.Current_Status}):"Review"==dijit.byId("statusSelect").value?
json1_ALL_tmp2=a.filter(function(a){return"Active"==a.Current_Status||"Awaiting Resubmitatl/Revisions"==a.Current_Status||"Awaiting Resubmittal"==a.Current_Status||"Awaiting Resubmittal/Revisions"==a.Current_Status||"Comments Pending"==a.Current_Status||"Comments Provided"==a.Current_Status||"Consultation Meeting Required"==a.Current_Status||"Decision Pending"==a.Current_Status||"DNS"==a.Current_Status||"Electronic Review"==a.Current_Status||"Electronic Review Only"==a.Current_Status||"Field Revisions"==
a.Current_Status||"Form Routed for Signature"==a.Current_Status||"In Review"==a.Current_Status||"Meeting Held"==a.Current_Status||"Meeting Scheduled"==a.Current_Status||"NPDES Inspection Required"==a.Current_Status||"Pending Internal Action"==a.Current_Status||"Plan Review in Process"==a.Current_Status||"Plan Review In Process"==a.Current_Status||"Plan Review in Progress"==a.Current_Status||"Plans Routed for Review"==a.Current_Status||"Precon Meeting Required"==a.Current_Status||"Precon Meeting Scheduled"==
a.Current_Status||"Ready to Issue"==a.Current_Status||"Referred to Code Enforcement"==a.Current_Status||"Resbumittal Required"==a.Current_Status||"Resubmittal Required"==a.Current_Status||"Revision Required"==a.Current_Status||"Revision Review in Process"==a.Current_Status||"Revision Review in Progress"==a.Current_Status||"Revisions Approved"==a.Current_Status||"Revisions Required"==a.Current_Status||"Revisions Routed for Review"==a.Current_Status||"Revisons Required"==a.Current_Status}):"Inspections"==
dijit.byId("statusSelect").value?json1_ALL_tmp2=a.filter(function(a){return"Permit Issued"==a.Current_Status||"Temp CO Issued"==a.Current_Status}):"Finalized"==dijit.byId("statusSelect").value&&(json1_ALL_tmp2=a.filter(function(a){return"C of O Issued"==a.Current_Status||"Cert of Completion Issued"==a.Current_Status||"Closed"==a.Current_Status||"Decision Final"==a.Current_Status||"Decision Issued"==a.Current_Status||"Denied"==a.Current_Status||"Expired"==a.Current_Status||"Final"==a.Current_Status||
"Final Decision"==a.Current_Status||"Final Inspection"==a.Current_Status||"Finaled"==a.Current_Status||"Permit Denied"==a.Current_Status||"Permit Expired"==a.Current_Status||"Permit Finaled"==a.Current_Status||"Reconsideration Decision Issue"==a.Current_Status||"Reconsideration Denied"==a.Current_Status||"Released"==a.Current_Status||"Staff Report Complete"==a.Current_Status||"Staff Report In Process"==a.Current_Status}));this.json1=json1_ALL_tmp2},_searchPermit:function(a){if(13==a.keyCode||0==a.buttons)permitNumberSearch=
!0,json_PermitNumber=json1.filter(function(a){return a.Permit_Number==document.getElementById("PermitNum").value.trim().toUpperCase()}),json_PermitNumber.length?(a=new q({x:json_PermitNumber[0].Longitude,y:json_PermitNumber[0].Latitude,spatialReference:{wkid:4326}}),this.map.centerAndZoom(a,18),g.hitch(this,this._requestLayerQuery(this.map,json_PermitNumber))):alert("Permit number "+document.getElementById("PermitNum").value.trim()+" not found.")},_searchFilter:function(){1==permitNumberSearch&&(permitNumberSearch=
!1);g.hitch(this,this._extentQuery())},_bindEvent:function(){this.config.legend.autoUpdate&&(this.own(n(this._jimuLayerInfos,"layerInfosIsShowInMapChanged",g.hitch(this,"refreshLegend"))),this.own(n(this._jimuLayerInfos,"layerInfosChanged",g.hitch(this,"refreshLegend"))),this.own(n(this._jimuLayerInfos,"layerInfosRendererChanged",g.hitch(this,"refreshLegend"))))},_getLayerInfosParam:function(){return void 0===this.config.legend.layerInfos?u.getLayerInfosParam():u.getLayerInfosParamByConfig(this.config.legend)},
refreshLegend:function(){var a=this._getLayerInfosParam();this.legend.refresh(a)}})});